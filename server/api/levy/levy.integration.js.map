{"version":3,"sources":["../../../../server/api/levy/levy.integration.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;yBAGO,WAAW;;;;sBACjB,QAAQ;;;;AAFtB,IAAI,GAAG,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;;AAK3B,QAAQ,CAAC,WAAW,EAAE,YAAW;;AAE/B,UAAQ,CAAC,gBAAgB,EAAE,YAAW;AACpC,QAAI,KAAK,CAAC;;AAEV,cAAU,CAAC,UAAS,IAAI,EAAE;AACxB,kCAAQ,GAAG,CAAC,CACT,GAAG,CAAC,YAAY,CAAC,CACjB,MAAM,CAAC,GAAG,CAAC,CACX,MAAM,CAAC,cAAc,EAAE,MAAM,CAAC,CAC9B,GAAG,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;AACjB,YAAI,GAAG,EAAE;AACP,iBAAO,IAAI,CAAC,GAAG,CAAC,CAAC;SAClB;AACD,aAAK,GAAG,GAAG,CAAC,IAAI,CAAC;AACjB,YAAI,EAAE,CAAC;OACR,CAAC,CAAC;KACN,CAAC,CAAC;;AAEH,MAAE,CAAC,qCAAqC,EAAE,YAAW;;AAEnD,+BAAE,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC,KAAK,EAAE,CAAC,MAAM,GAAG,CAAC,CAAC;KAEnC,CAAC,CAAC;GAEJ,CAAC,CAAC;;AAEH,UAAQ,CAAC,mDAAmD,EAAE,YAAW;;AAEvE,QAAI,WAAW,CAAC;;AAEhB,cAAU,CAAC,UAAS,IAAI,EAAE;AACxB,kCAAQ,GAAG,CAAC,CACT,GAAG,CAAC,wCAAwC,CAAC,CAC7C,MAAM,CAAC,GAAG,CAAC,CACX,MAAM,CAAC,cAAc,EAAE,MAAM,CAAC,CAC9B,GAAG,CAAC,UAAC,GAAG,EAAE,GAAG,EAAK;AACjB,YAAI,GAAG,EAAE;AACP,iBAAO,IAAI,CAAC,GAAG,CAAC,CAAC;SAClB;AACD,mBAAW,GAAG,GAAG,CAAC,IAAI,CAAC;AACvB,YAAI,EAAE,CAAC;OACR,CAAC,CAAC;KACN,CAAC,CAAC;;AAEH,MAAE,CAAC,mCAAmC,EAAE,YAAW;AACjD,iBAAW,CAAC,eAAe,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;KACzD,CAAC,CAAC;GAEJ,CAAC,CAAC;CAEJ,CAAC,CAAC","file":"levy.integration.js","sourcesContent":["'use strict';\n\nvar app = require('../..');\nimport request from 'supertest';\nimport _ from 'lodash';\n\n\ndescribe('Levy API:', function() {\n\n  describe('GET /api/levys', function() {\n    var levys;\n\n    beforeEach(function(done) {\n      request(app)\n        .get('/api/levys')\n        .expect(200)\n        .expect('Content-Type', /json/)\n        .end((err, res) => {\n          if (err) {\n            return done(err);\n          }\n          levys = res.body;\n          done();\n        });\n    });\n\n    it('should respond with a list of levys', function() {\n\n      _(levys).map().value().length > 0;\n\n    });\n\n  });\n\n  describe('GET /api/levys/calculate/:cuCode/:earnings/:cover', function() {\n\n    var calculation;\n\n    beforeEach(function(done) {\n      request(app)\n        .get('/api/levys/calculate/11010/55555/55555')\n        .expect(200)\n        .expect('Content-Type', /json/)\n        .end((err, res) => {\n          if (err) {\n            return done(err);\n          }\n          calculation = res.body;\n          done();\n        });\n    });\n\n    it('should respond with a calculation', function() {\n      calculation.totalWithoutGST.cpx.should.equal('1984.46');\n    });\n\n  });\n\n});\n"]}